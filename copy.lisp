;	Raeeca Narimani
;	utcs ID: gandalf
;	UT EID: rs47345


(! copy_block '(
	
	main
	(irmovl stack %esp)
     	(irmovl stack %ebp)
     	(irmovl 256 %edx)  		
	(pushl 	%edx)
	(irmovl dest %edx)
     	(pushl  %edx)
	(irmovl src %edx)
     	(pushl  %edx)
     	(call   copy)
	(popl %edx)
	(popl %edx)
	(popl %edx)
     	(halt)

	copy	
	(pushl %ebp);
	(rrmovl %esp %ebp);
	(mrmovl 8(%ebp) %ecx)  ; src
	(mrmovl 12(%ebp) %ebx) ; dest
	(mrmovl 16(%ebp) %edi) ; len
	(xorl %eax %eax)
	(xorl %edx %edx)

	loop
	(andl %edi %edi)
	(jle end1)
	(mrmovl 0(%ecx) %edx)
	(xorl %edx %eax)
	(rmmovl %edx 0(%ebx))
	(irmovl 4 %esi)
	(addl %esi %ecx)
	(addl %esi %ebx)
	(irmovl 1 %esi)
	(subl %esi %edi)
	(jmp loop)

	end1
  	(rrmovl %ebp %esp)
  	(popl %ebp)
  	(ret)

 
	(align 	4)	
	(pos 	3072)			
	src

	(dword 	1)
	(dword 	2)
	(dword 	3)
	(dword 	4)
	(dword 	5)
	(dword 	6)
	(dword 	7)
	(dword 	8)
	(dword 	9)
	(dword 	10)
	(dword 	11)
	(dword 	12)
	(dword 	13)
	(dword 	14)
	(dword 	15)
	(dword 	16)
	(dword 	17)
	(dword 	18)
	(dword 	19)
	(dword 	20)
	(dword 	21)
	(dword 	22)
	(dword 	23)
	(dword 	24)
	(dword 	25)
	(dword 	26)
	(dword 	27)
	(dword 	28)
	(dword 	29)
	(dword 	30)
	(dword 	31)
	(dword 	32)
	(dword  33)
	(dword  34)
	(dword  35)
	(dword  36)
	(dword 	37)
	(dword 	38)
	(dword 	39)
	(dword 	40)
	(dword 	41)
	(dword 	42)
	(dword 	43)
	(dword 	44)
	(dword 	45)
	(dword 	46)
	(dword 	47)
	(dword 	48)
	(dword 	49)
	(dword 	50)
	(dword 	51)
	(dword 	52)
	(dword 	53)
	(dword 	54)
	(dword 	55)
	(dword 	56)
	(dword 	57)
	(dword 	58)
	(dword 	59)
	(dword 	60)
	(dword 	61)
	(dword 	62)
	(dword 	63)
	(dword 	64)
	(dword 	65)
	(dword 	66)
	(dword 	67)
	(dword 	68)
	(dword  69)
	(dword  70)
	(dword  71)
	(dword 	72)
	(dword 	73)
	(dword 	74)
	(dword 	75)
	(dword 	76)
	(dword 	77)
	(dword 	78)
	(dword 	79)
	(dword 	80)
	(dword 	81)
	(dword 	82)
	(dword 	83)
	(dword 	84)
	(dword 	85)
	(dword 	86)
	(dword 	87)
	(dword 	88)
	(dword 	89)
	(dword 	90)
	(dword 	91)
	(dword 	92)
	(dword 	93)
	(dword 	94)
	(dword 	95)
	(dword 	96)
	(dword 	97)
	(dword 	98)
	(dword 	99)
	(dword 	100)
	(dword 	101)
	(dword 	102)
	(dword 	103)
	(dword 	104)
	(dword 	105)
	(dword 	106)
	(dword 	107)
	(dword 	108)
	(dword 	109)
	(dword 	110)
	(dword 	111)
	(dword 	112)
	(dword 	113)
	(dword 	114)
	(dword 	115)
	(dword 	116)
	(dword 	117)
	(dword 	118)
	(dword 	119)
	(dword 	120)
	(dword 	121)
	(dword 	122)
	(dword 	123)
	(dword 	124)
	(dword 	125)
	(dword 	126)
	(dword 	127)
	(dword 	128)
	(dword 	129)
	(dword 	130)
	(dword 	131)
	(dword 	132)
	(dword  133)
	(dword  134)
	(dword  135)
	(dword  136)
	(dword 	137)
	(dword 	138)
	(dword 	139)
	(dword 	140)
	(dword 	141)
	(dword 	142)
	(dword 	143)
	(dword 	144)
	(dword 	145)
	(dword 	146)
	(dword 	147)
	(dword 	148)
	(dword 	149)
	(dword 	150)
	(dword 	151)
	(dword 	152)
	(dword 	153)
	(dword 	154)
	(dword 	155)
	(dword 	156)
	(dword 	157)
	(dword 	158)
	(dword 	159)
	(dword 	160)
	(dword 	161)
	(dword 	162)
	(dword 	163)
	(dword 	164)
	(dword 	165)
	(dword 	166)
	(dword 	167)
	(dword 	168)
	(dword  169)
	(dword  170)
	(dword  171)
	(dword 	172)
	(dword 	173)
	(dword 	174)
	(dword 	175)
	(dword 	176)
	(dword 	177)
	(dword 	178)
	(dword 	179)
	(dword 	180)
	(dword 	181)
	(dword 	182)
	(dword 	183)
	(dword 	184)
	(dword 	185)
	(dword 	186)
	(dword 	187)
	(dword 	188)
	(dword 	189)
	(dword 	190)
	(dword 	191)
	(dword 	192)
	(dword 	193)
	(dword 	194)
	(dword 	195)
	(dword 	196)
	(dword 	197)
	(dword 	198)
	(dword 	199)
	(dword 	200)
	(dword 	201)
	(dword 	202)
	(dword 	203)
	(dword 	204)
	(dword 	205)
	(dword 	206)
	(dword 	207)
	(dword 	208)
	(dword 	209)
	(dword 	210)
	(dword 	211)
	(dword 	212)
	(dword 	213)
	(dword 	214)
	(dword 	215)
	(dword 	216)
	(dword 	217)
	(dword 	218)
	(dword 	219)
	(dword 	220)
	(dword 	221)
	(dword 	222)
	(dword 	223)
	(dword 	224)
	(dword 	225)
	(dword 	226)
	(dword 	227)
	(dword 	228)
	(dword  229)
	(dword 	230)
	(dword 	231)
	(dword 	232)
	(dword  233)
	(dword  234)
	(dword  235)
	(dword  236)
	(dword 	237)
	(dword 	238)
	(dword 	239)
	(dword 	240)
	(dword 	241)
	(dword 	242)
	(dword 	243)
	(dword 	244)
	(dword 	245)
	(dword 	246)
	(dword 	247)
	(dword 	248)
	(dword 	249)
	(dword 	250)
	(dword 	251)
	(dword 	252)
	(dword 	253)
	(dword 	254)
	(dword 	255)
	(dword 	256)
	


	(align 	4)
	(pos 	5120)		
	dest				

	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)
	(dword 	111)
	(dword 	222)
	(dword 	333)
	(dword 	444)
	(dword 	555)
	(dword 	666)
	(dword 	777)
	(dword 	888)

	))

(y86-prog (@ copy_block))      

(! location 0)

(! symbol-table
   (hons-shrink-alist	 	
    (y86-symbol-table		
     (@ copy_block)             
     (@ location)            	
     'symbol-table)             
    'shrunk-symbol-table))     

(! init-mem
   (hons-shrink-alist
    (y86-asm (@ copy_block)     
             (@ location)      	
             (@ symbol-table)  	
             'fibo)     	
    'shrunk-fibo))       	

(m86-clear-regs x86-32)       	
(m86-clear-mem  x86-32 8192)  	   

(! init-pc 0)

(! y86-status nil)   		

(init-y86-state
 (@ y86-status)  		
 (@ init-pc)     		
 nil             		
 nil             		
 (@ init-mem)   		
 x86-32         		
 )

(y86 x86-32 100000)
(m32-get-regs-and-flags x86-32) 
(m32-get-mem-words 3072 256 x86-32)  
(m32-get-mem-words 5120 256 x86-32) 





